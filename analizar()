def analizar():
    send("üöÄ <b>CryptoSniper FX PRO REAL ACTIVADO</b>")
    actualizar_estado("Activo en REAL ‚úÖ")

    while True:
        for asset in SYMBOLS.keys():
            velas5m = obtener_velas(asset, "5m")
            if not velas5m:
                continue

            cons = detectar_confluencias(velas5m)
            total = sum(cons.values())
            price = velas5m[-1][4]

            if total == 3:
                send(
                    f"üü° <b>PRE-ALERTA</b>\n"
                    f"üìå {asset}\n"
                    f"üß© 3 confluencias detectadas"
                )

            if total >= 4:
                msg = procesar_senal(asset, cons, price)
                if msg:
                    send(msg)

        # ‚è±Ô∏è AHORA ANALIZA CADA 1 MINUTO
        time.sleep(60)
